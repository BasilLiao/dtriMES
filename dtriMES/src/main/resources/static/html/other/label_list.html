<!-- 查詢項目 -->
<style>
#bg_linear {
	background: #58a;
	background-image: linear-gradient(rgba(255, 255, 255, .3) 1px, transparent 0), linear-gradient(90deg, rgba(255, 255, 255, .3) 1px, transparent 0), linear-gradient(white 1px, transparent 0),
		linear-gradient(90deg, white 1px, transparent 0);
	background-size: 10px 10px, 10px 10px, 50px 50px, 50px 50px;
}

.radio_size {
	width: 22px;
	height: 20px;
}

.datalist {
	overflow: hidden;
	text-overflow: ellipsis;
}

.datetimepicker {
	margin-top: 50px;
}

.fixed_cell {
	position: sticky;
}

select {
	border-width: 2px;
}
</style>
<div id="customized">
	<!-- 維修處理 -->
	<div class="shadow m-0 row">
		<!-- 左半邊 -->
		<div class="col-4 p-0 rounded-top m-0 border">
			<div class="text-left bg-white rounded-top m-0 pl-1 h4 col-md">
				<div class="col p-0 pt-1 pb-1">
					<i class="bi bi-tools mr-1 mb-1 btn btn-outline-dark p-0 pr-1 pl-1 shadow-sm"></i>*Label Set
				</div>
			</div>
			<div class="col-md m-0 p-2 text-left">
				<div class="col-md-12 p-0 m-0 row">
					<div class="col-md-3 p-1 m-0 d-none">
						<div class="col p-0">Label ID(標籤):</div>
						<input id="ll_id" class="clear_i col p-1 rounded" type="text" value="" disabled="disabled">
					</div>
					<div class="col-md-3 p-1 m-0 d-none">
						<div class="col p-0">Label Unicode:</div>
						<input id="ll_ci" class="col p-1 rounded" type="text" value="UTF8" disabled="disabled">
					</div>
					<div class="col-md-3 p-1 m-0">
						<div class="col p-0">Name(Key):</div>
						<input id="ll_name" class="clear_i col p-1 rounded border-1 border-primary" type="text" value="" placeholder="Label Name">
					</div>
					<div class="col-md-3 p-1 m-0">
						<div class="col p-0">Label Group:</div>
						<input id="ll_g_name" class="clear_i col p-1 rounded border-1 border-primary" type="text" value="" placeholder="Group Name">
					</div>
					<div class="col-md-3 p-1 m-0 ">
						<div class="col p-0">Label Width.:</div>
						<input id="ll_pw" class="clear_i col p-1 rounded border-1 border-primary" type="number" min="0" value="600" placeholder="(1inch : 200.)">
					</div>
					<div class="col-md-3 p-1 m-0">
						<div class="col p-0">Label height.:</div>
						<input id="ll_ll" class="clear_i col p-1 rounded border-1 border-primary" type="number" min="0" value="200" placeholder="(1inch : 200.)">
					</div>
					<div class="col-md-3 p-1 m-0 ">
						<div class="col p-0">Label Start X.:</div>
						<input id="ll_lh_x" class="clear_i col p-1 rounded border-1 border-primary" type="number" min="0" value="0" placeholder="(1inch : 200.)">
					</div>
					<div class="col-md-3 p-1 m-0">
						<div class="col p-0">Label Start Y.:</div>
						<input id="ll_lh_y" class="clear_i col p-1 rounded border-1 border-primary" type="number" min="0" value="0" placeholder="(1inch : 200.)">
					</div>
					<div class="col-md-3 p-1 m-0">
						<div class="col p-0">Label Deep:</div>
						<input id="ll_md" class="clear_i col p-1 rounded border-1 border-primary" type="number" min="-30" max="30" value="20" placeholder="+-30">
					</div>
					<div class="col-md-3 p-1 m-0">
						<div class="col p-0">Label Speed:</div>
						<input id="ll_pr" class="clear_i col p-1 rounded border-1 border-primary" type="number" min="0" max="7" value="5" placeholder="0-7">
					</div>
				</div>
				<!--  -->
				<div class="col-md-12 p-0 m-0 row">
					<div class="col-md-9 p-1 m-0 d-none">
						<input id="ll_xa" class="clear_i col p-1 rounded border-1 border-primary" type="text" value="">
					</div>
					<div class="col-md-12 p-1 m-0">
						<div class="col p-0">Label Note:</div>
						<input id="sys_note" class="clear_i col p-1 rounded border-1 border-primary" type="text" value="" placeholder="Label Note">
					</div>

				</div>
			</div>
		</div>
		<!-- 中間邊 -->
		<div class="col-4 p-0 rounded-top m-0 border">
			<div class="text-left bg-white rounded-top m-0 pl-1 h4 col-md">
				<div class="col p-0 pt-1 pb-1">
					<i class="bi bi-textarea-resize mr-1 mb-1 btn btn-outline-dark p-0 pr-1 pl-1 shadow-sm"></i>Label Package
				</div>
			</div>
			<div class="col-md m-0 p-2 text-left">
				<!--  -->
				<div id="ll_o_p_all" class="col-md-12 p-0 m-0 row ">
					<div class="col-md-6 p-1 m-0">
						<div class="col p-0">*Package(包裝類型):</div>
						<select id="ll_o_p_type" class="clear_s col p-1 rounded border-1 border-warning">
							<option class="def" value="">Only in one box</option>
							<option class="" value="multiple">Multiple in one box</option>
						</select>
					</div>
					<div class="col-md-3 p-1 m-0">
						<div class="col p-0">Package Qty:</div>
						<input disabled="disabled" id="ll_o_p_qty" class="clear_i col p-1 rounded border-1 border-warning" type="number" value="" placeholder="40?">
					</div>
					<div class="col-md-3 p-1 m-0">
						<div class="col p-0">Label Qty:</div>
						<input disabled="disabled" id="ll_o_l_qty" class="clear_i col p-1 rounded border-1 border-warning" type="number" value="" placeholder="10?">
					</div>
					<div class="col-md-6 p-1 m-0">
						<div class="col p-0">Hidden Block(指定隱藏):</div>
						<input disabled="disabled" id="ll_o_h_b_name" class="clear_i col p-1 rounded border-1 border-warning" type="text" value="" placeholder="ex_1 ex_2 ex_3">
					</div>
					<div class="col-md-6 p-1 m-0">
						<div class="col p-0">Repeat Block(指定重複):</div>
						<input disabled="disabled" id="ll_o_s_b_name" class="clear_i col p-1 rounded border-1 border-warning" type="text" value="" placeholder="ex_4">
					</div>
					<div class="col-md-3 p-1 m-0">
						<div class="col p-0">Top(上間距):</div>
						<input disabled="disabled" id="ll_o_top" class="clear_i col p-1 rounded border-1 border-warning" type="number" value="" placeholder="0-200"> <input id="ll_o_all" class="clear_i d-none"
							type="text" value="">
					</div>
					<div class="col-md-6 p-1 m-0 ">
						<!-- 存檔 -->
						<input id="ll_o_all" class="clear_i d-none" type="text" value="">
					</div>
					<div class="col-md-3 p-1 m-0 mt-4">
						<button id="label_set_ok_btn" class="col btn btn-info btn-sm" type="button">Setting</button>
					</div>
				</div>
				<!--  -->
			</div>
		</div>
		<!-- 右半邊 -->
		<div class="col-4 p-0 rounded-top m-0 border">
			<div class="text-left bg-white rounded-top m-0 pl-1 h4 col-md">
				<div class="col p-0 pt-1 pb-1">
					<i class="bi bi-search mr-1 mb-1 btn btn-outline-dark p-0 pr-1 pl-1 shadow-sm"></i>Label Choose
				</div>
			</div>
			<div class="col-md m-0 p-2 text-left">
				<div class="col-md-12 p-0 m-0 row">
					<div class="col-md-12 m-0 p-1">
						<div class="col p-0">Label Choose(選擇標籤):</div>
						<select id="label_choose" class="col p-1 rounded border-1 border-success">
							<option class="def" value="">New Label</option>
						</select>
					</div>
					<div class="col-md-6 m-0 p-1">
						<div class="col p-0">Test Print Code(標籤機):</div>
						<input id="print_code" class="col p-1 rounded border-1 border-success" type="text" value="" placeholder="Ex:6F2A">
					</div>
					<div class="col-md-6 m-0 p-1">
						<div class="col p-0">Print Qty(數量):</div>
						<input id="print_qty" class="col p-1 rounded border-1 border-success" type="number" value="1" placeholder="Ex:1">
					</div>
				</div>
				<div class="col-md-12 p-0 m-0">
					<div class="col-md m-0 p-1" style="min-height: 20px"></div>
				</div>
				<div class="col p-1 row m-0">
					<div class="col-md-3 p-1 m-0">
						<button id="ll_search_btn" class="col btn btn-primary btn-sm" type="button">Search(S1)</button>
					</div>
					<div class="col-md-3 p-1 m-0">
						<button id="ll_save_btn" class="col m-0 btn btn-success btn-sm" type="button">Save(S2)</button>
					</div>
					<div class="col-md-3 p-1 m-0">
						<button id="ll_print_t_l_btn" class="col btn btn-secondary btn-sm" type="button">Print Test(S3)</button>
					</div>
					<div class="col-md-3 p-1 m-0">
						<button id="ll_clear_btn" class="col btn btn-warning btn-sm" type="button">Clear All</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- 產品資訊 -->
	<div class="shadow m-0 row mt-2">
		<!-- 左半邊 -->
		<div class="col-4 p-0 rounded-top m-0 border">
			<div class="text-left bg-white rounded-top m-0 pl-1 h4">
				<div class="col p-0 pt-1 pb-1">
					<i class="bi bi-stack mr-1 mb-1 btn btn-outline-dark p-0 pr-1 pl-1 shadow-sm"></i>Label Block
				</div>
			</div>
			<div class="row p-0 m-0">
				<div id="label_blocks_ex" class="col-md-12 m-0 p-2 pr-4 text-left">
					<div class="col-md m-0 p-1 row" id="">
						<div class="col-md-1 p-1">A/D:</div>
						<div class="col-md-4 p-1">*Name Key(區塊):</div>
						<div class="col-md-2 p-1">*Block X.:</div>
						<div class="col-md-2 p-1">*Block Y.:</div>
						<div class="col-md-2 p-1">*Size.:</div>
						<div class="col-md-1 p-1">M:</div>
					</div>
					<!-- ll_fo_list_ex 區塊清單 -->
					<div class="col-md m-0 p-1 row bg-white rounded border" id="ll_fo_list_ex">
						<div class="col-md-1 p-1">
							<div>
								<i title="ll_fo_add_ex" class="ll_fo_action bi bi-plus-square mr-1 mb-1 btn btn-outline-success p-0 pr-1 pl-1 shadow-sm"></i>
							</div>
							<div>
								<i title="ll_fo_del_ex" class="ll_fo_action d-none bi bi-x-square mr-1 mb-1 btn btn-outline-danger p-0 pr-1 pl-1 shadow-sm"></i>
							</div>
						</div>
						<div class="col-md-4 p-1">
							<input disabled="disabled" class="ll_fo_name col-md p-0 rounded" type="text" value="ex" placeholder="Block Name">
						</div>
						<div class="col-md-2 p-1">
							<input disabled="disabled" class="ll_fo_x col-md p-0 rounded" type="number" value="0" placeholder="(1inch : 200.)">
						</div>
						<div class="col-md-2 p-1">
							<input disabled="disabled" class="ll_fo_y col-md p-0 rounded" type="number" value="0" placeholder="(1inch : 200.)">
						</div>
						<div class="col-md-2 p-1">
							<input disabled="disabled" class="ll_fo_size col-md p-0 rounded" type="number" value="80" placeholder="(1inch : 200.)">
						</div>
						<div class="col-md-1 p-1">
							<div>
								<i title="ll_fo_mod_ex" class="d-none ll_fo_action bi bi-pencil-fill mr-1 mb-1 btn btn-outline-warning p-0 pr-1 pl-1 shadow-sm"></i>
							</div>
						</div>
						<!--  -->
						<div class="col-md-1 p-1 d-none">
							<input disabled="disabled" class="ll_fo_content col-md p-0 rounded" type="text" value="{}">
						</div>
					</div>
				</div>
				<div id="label_blocks" class="col-md-12 m-0 p-2 text-left" style="overflow: scroll; height: 530px;"></div>
			</div>
		</div>
		<!-- 右半邊 -->
		<div class="col-8 p-0 rounded-top m-0 border">
			<div class="text-left bg-white rounded-top m-0 pl-1 h4 row">
				<div class="col-9 p-0 pt-1 pb-1">
					<i class="bi bi-grid-3x3-gap mr-1 mb-1 btn btn-outline-dark p-0 pr-1 pl-1 shadow-sm"></i>Preview Label(1inch : 200px : 200.)
				</div>
				<div class="col-3 p-0 pt-1 pb-1 row m-0">
					<div class="col-2">X:</div>
					<div id="pl_x" class="col-4 p-0">0</div>
					<div class="col-2">Y:</div>
					<div id="pl_y" class="col-4 p-0">0</div>
				</div>
			</div>
			<div id="preview_label" class="row p-0 m-0">
				<!-- 背景網格 -->
				<div class="col-md-12 m-0 p-2 text-left" style="overflow: scroll; height: 630px;">
					<div id="bg_linear" style="min-height: 2000px; min-width: 2000px;">
						<div id="bg_label" style="height: 200px; width: 600px; background-color: #e9ecef80;">
							<div id="bg_pl_ex" class="d-none rounded border border-success " style="position: absolute; min-height: 30px; min-width: 30px; top: 10px; left: 10px; background-color: #e9ecef80;">
								<div class="pl_title text-muted small" style="position: absolute;">區塊標題</div>
								<div class="pl_content pt-2 h5 mb-0" style="word-break: break-all;"></div>
							</div>
						</div>
					</div>
				</div>
				<!-- 區塊設定 -->
				<div id="label_block_content" class="col-md-12 p-0 row m-0 bg-light rounded border border-secondary shadow text-left"
					style="position: absolute; top: 50px; left: 10px; width: 820px; display: none;">
					<div class="col-md-12 p-1 h4 m-0 bg-white" style="height: 35px">Block Content(區塊內容)</div>
					<div class="col-md-12 p-1 m-0 row" style="height: 65px">
						<div class="col-md-4 p-1 m-0">
							<div class="col p-0">Block Name(區塊名稱):</div>
							<div id="label_block_id" class="d-none"></div>
							<div id="label_block_name" class="col p-0 m-0 h3 bg-success">.</div>
						</div>
						<div class="col-md-4 p-1 m-0" id="">
							<div class="col p-0">Block Type(區塊類型):</div>
							<select id="label_block_type" class="col p-1 rounded border-1 border-info ">
								<option class="def_char_type" value="">Char Type(文字類型)</option>
								<option class="" value="img_type">Img Type(圖片類型)</option>
								<option class="" value="barcode_type">Barcode Type(一維碼型)</option>
								<option class="" value="qr_code_type">QR Code Type(二維碼型)</option>
							</select>
						</div>
						<div class="col-md-2 p-1 m-0 mt-4">
							<button id="label_block_close_btn" type="button" class="col btn btn-warning btn-sm">Close</button>
						</div>
						<div class="col-md-2 p-1 m-0 mt-4">
							<button id="label_block_ok_btn" type="button" class="col btn btn-info btn-sm bc_all">Setting</button>
						</div>
					</div>
					<div class="col-md-12 p-1 m-0" style="height: 480px;">
						<!-- 文字樣式 -->
						<div id="char_type_content" class="col-md-12 p-0 m-0 rounded border border-secondary shadow">
							<div class="col-md p-1 mb-2 bg-white">
								<b class="h4">Char Type(文字類型)</b>
							</div>
							<div id="" class="col-md p-1 row m-0">
								<div class="col-md-12 m-0 p-0 row rounded border-bottom">
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">*Text FD(文字):</div>
										<input id="ll_fd" class="col p-1 rounded border-1 border-info bc_all" type="text" value="" placeholder="PN:123456789">
									</div>
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">*TEST FD(測試文字):</div>
										<input id="ll_fd_test" class="col p-1 rounded border-1 border-info bc_all" type="text" value="" placeholder="PN:123456789">
									</div>
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">Follow(跟隨欄位):</div>
										<select id="ll_fd_f" class="col p-1 rounded border-1 border-info bc_all">
											<option class="def_na" value="">N/A</option>
										</select>
									</div>
								</div>
								<div class="col-md-6 p-0 m-0">
									<div class="col-md-12 m-0 p-0 row rounded border">
										<div class="col-md-12 p-1 m-0 h5">*Font</div>
										<div class="col-md-6 p-1 m-0">
											<div class="col p-0">Type A_T(字型):</div>
											<select id="ll_a_t" class="col p-1 rounded border-1 border-info bc_all">
												<option class="def_A" value="">FONT A</option>
												<option class="" value="B">FONT B</option>
												<option class="" value="C">FONT C</option>
												<option class="" value="D">FONT D</option>
												<option class="" value="E">FONT E</option>
												<option class="" value="F">FONT F</option>
												<option class="" value="G">FONT G</option>
												<option class="" value="H">FONT H</option>
												<option class="" value="0">FONT 0</option>
												<option class="" value="GS">FONT GS</option>
												<option class="" value="P">FONT P</option>
												<option class="" value="Q">FONT Q</option>
												<option class="" value="R">FONT R</option>
												<option class="" value="S">FONT S</option>
												<option class="" value="T">FONT T</option>
												<option class="" value="U">FONT U</option>
												<option class="" value="V">FONT V</option>
												<option class="" value="1">細明體字型 1</option>

											</select>
										</div>
										<div class="col-md-6 p-1 m-0">
											<div class="col p-0">*Angle A_c(角度):</div>
											<select id="ll_a_c" class="col p-1 rounded border-1 border-info bc_all">
												<option class="def_N" value="">0°</option>
												<option class="" value="R">90°</option>
												<option class="" value="I">180°</option>
												<option class="" value="B">270°</option>
											</select>
										</div>
										<div class="col-md-6 p-1 m-0">
											<div class="col p-0">*Size A_h(字比例):</div>
											<input id="ll_a_h" class="col p-1 rounded border-1 border-info bc_all" type="number" value="" placeholder="(1inch:200.)">
										</div>
										<div class="col-md-6 p-1 m-0">
											<div class="col p-0">Width A_w(字寬度):</div>
											<input id="ll_a_w" class="col p-1 rounded border-1 border-info bc_all" type="number" value="" placeholder="(1inch:200.)">
										</div>
									</div>
									<div class="col-md-12 m-0 p-0 row rounded border border-warning">
										<div class="col-md-12 p-1 m-0 h5">Block</div>
										<div class="col-md-6 p-1 m-0">
											<div class="col p-0">Width FB_a(區寬度):</div>
											<input id="ll_fb_a" class="col p-1 rounded border-1 border-info bc_all" type="number" value="" placeholder="(1inch:200.)">
										</div>
										<div class="col-md-6 p-1 m-0">
											<div class="col p-0">Rows FB_b(行數):</div>
											<input id="ll_fb_b" class="col p-1 rounded border-1 border-info bc_all" type="number" value="" placeholder="Rows">
										</div>
										<div class="col-md-6 p-1 m-0">
											<div class="col p-0">Row height FB_c(行高):</div>
											<input id="ll_fb_c" class="col p-1 rounded border-1 border-info bc_all" type="number" value="" placeholder="Row height">
										</div>
										<div class="col-md-6 p-1 m-0">
											<div class="col p-0">Side FB_d(靠邊):</div>
											<select id="ll_fb_d" class="col p-1 rounded border-1 border-info bc_all">
												<option class="def_NA" value="">N/A</option>
												<option class="" value="C">Middle</option>
												<option class="" value="L">Left</option>
												<option class="" value="R">Right</option>
											</select>
										</div>
									</div>
								</div>
								<div class="col-md-6 m-0 p-0 row rounded border">
									<div class="col-md-12 p-1 m-0" id="">
										<img alt="" src="./img/ZPL_font_Figure_4.png" style="width: 100%;">
									</div>
								</div>
							</div>
						</div>
						<!-- 圖片樣式 -->
						<div id="img_type_content" class="col-md-12 p-1 m-0 rounded border border-secondary" style="display: none;">
							<div class="col-md p-0 mb-2">
								<b class="h4">Img Type</b>
							</div>
							<div class="col-md p-0 row m-0">
								<div class="col-md-12 m-0 p-0 row rounded border-bottom">
									<div class="col-md p-1 m-0" id="">
										<div class="col p-0">*Img GFA(圖片):</div>
										<div id="c_imgs_list" class="col-9 p-0 m-0 row">
											<div class="col-6 p-1 rounded p-0 c_detail_imgs">
												<p class="save_ms_atta d-none m-0 pl-1 small text-danger" style="bottom: 0px; z-index: 6; position: absolute;">副檔名錯誤</p>
												<p class="save_ms_bigger d-none m-0 pl-1 small text-danger" style="bottom: 0px; z-index: 6; position: absolute;">檔案太大</p>
												<p class="save_ms_put m-0 pl-1 small text-success" style="bottom: 0px; z-index: 6; position: absolute;">
													請放入圖片<br>(限制:2M/1Pic)
												</p>
												<input value="" type="file" accept=".png" class="col form-control p-1 c_chose_imgs bc_all" style="height: 100%; min-height: 200px">
											</div>
											<div class="col-6 p-1 pr-2 pl-2">
												<img id="ll_gfa" alt="" src="./img/imgFrame.png" class="col rounded p-0 pb-1 c_img_listen"> <input class="d-none c_img_name" value="">
											</div>
											<input alt="img" disabled="disabled" value="[]" class="d-none c_save_value bc_all">
										</div>
									</div>
									<div class="col-md-3 p-1 m-0">
										<div class="col p-0">Size GFA_p(縮小比):</div>
										<input id="ll_gfa_p" class="col p-1 rounded border-1 border-info bc_all" type="number" value="" step=0.1 max="1.0" placeholder="0.1-1.0">
										<button id="ll_gfa_clear_btn" type="button" class="col btn btn-warning btn-sm mt-2">Clear Img</button>
									</div>
								</div>
							</div>
						</div>
						<!-- 一維碼樣式 -->
						<div id="barcode_type_content" class="col-md-12 p-1 m-0 rounded border border-secondary" style="display: none;">
							<div class="col-md p-0 mb-2">
								<b class="h4">Barcode Type(一維條碼)</b>
							</div>
							<div id="" class="col-md p-0 row m-0">
								<div class="col-md-12 m-0 p-0 row rounded border-bottom">
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">*Text BFD(文字):</div>
										<input id="ll_bfd" class="col p-1 rounded border-1 border-info bc_all" type="text" value="" placeholder="PN:123456789">
									</div>
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">*TEST BFD(測試):</div>
										<input id="ll_bfd_test" class="col p-1 rounded border-1 border-info bc_all" type="text" value="" placeholder="PN:123456789">
									</div>
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">Follow(跟隨欄位):</div>
										<select id="ll_bfd_f" class="col p-1 rounded border-1 border-info bc_all">
											<option class="def_na" value="">N/A</option>
										</select>
									</div>
								</div>
								<div class="col-md-12 m-0 p-0 row rounded border">
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">*Proportion BY_m(條碼比例):</div>
										<input id="ll_by_m" class="col p-1 rounded border-1 border-info bc_all" type="number" value="" placeholder="1-5">
									</div>
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">*BY_w(寬度比例):</div>
										<input id="ll_by_w" class="col p-1 rounded border-1 border-info bc_all" type="number" value="" placeholder="1-3">
									</div>
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">*B_h(高度):</div>
										<input id="ll_b_h" class="col p-1 rounded border-1 border-info bc_all" type="number" value="" placeholder="1-100">
									</div>
								</div>
								<div class="col-md-12 m-0 p-0 row rounded border">
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">*Barcode B_x(條碼類型):</div>
										<select id="ll_b_x" class="col p-1 rounded border-1 border-info bc_all">
											<option class="def_3" value="">Code39</option>
											<option class="" value="1">Code11</option>
											<option class="" value="C">Code128</option>
										</select>
									</div>
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">*Barcode Angle B_c(角度):</div>
										<select id="ll_b_c" class="col p-1 rounded border-1 border-info bc_all">
											<option class="def_N" value="">0°</option>
											<option class="" value="R">90°</option>
											<option class="" value="I">180°</option>
											<option class="" value="B">270°</option>
										</select>
									</div>
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">*Barcode Check B_d(檢查):</div>
										<select disabled="disabled" id="ll_b_d" class="col p-1 rounded border-1 border-info ">
											<option class="def_N" value="">N</option>
											<option class="" value="Y">Y</option>
										</select>
									</div>
									<div class="col-md-12 p-1 m-0">
										<div class="col p-0">*Other B_e_f_g(其他:文字高度,上方,下方):</div>
										<input id="ll_b_efg" disabled="disabled" class="col p-1 rounded border-1 border-info " type="text" value="10,N,N">
									</div>
								</div>
							</div>
						</div>
						<!-- 二維碼樣式 -->
						<div id="qr_code_type_content" class="col-md-12 p-1 m-0 rounded border border-secondary" style="display: none;">
							<div class="col-md p-0 mb-2">
								<b class="h4">QR Code Type(二維條碼)</b>
							</div>
							<div id="" class="col-md p-0 row m-0">
								<div class="col-md-12 m-0 p-0 row rounded border-bottom">
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">*Text BQFD(文字):</div>
										<input id="ll_bqfd" class="col p-1 rounded border-1 border-info bc_all" type="text" value="" placeholder="PN:123456789">
									</div>
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">*TEST BQFD(測試):</div>
										<input id="ll_bqfd_test" class="col p-1 rounded border-1 border-info bc_all" type="text" value="" placeholder="PN:123456789">
									</div>
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">Follow(跟隨欄位):</div>
										<select id="ll_bqfd_f" class="col p-1 rounded border-1 border-info bc_all">
											<option class="def_na" value="">N/A</option>
										</select>
									</div>
								</div>
								<div class="col-md-12 m-0 p-0 row rounded border">
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">*Barcode Angle Bq_c(角度):</div>
										<select id="ll_bq_c" class="col p-1 rounded border-1 border-info bc_all">
											<option class="def_N" value="">0°</option>
											<option class="" value="R">90°</option>
											<option class="" value="I">180°</option>
											<option class="" value="B">270°</option>
										</select>
									</div>
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">*Barcode Check Bq_d(類型):</div>
										<select disabled="disabled" id="ll_bq_d" class="col p-1 rounded border-1 border-info ">
											<option class="def_N" value="">2(固定)</option>
										</select>
									</div>
									<div class="col-md-4 p-1 m-0">
										<div class="col p-0">*Barcode Size Bq_e(縮放):</div>
										<input id="ll_bq_e" class="col p-1 rounded border-1 border-info bc_all" type="number" placeholder="1-10" value="">
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
//控制端
customized = new Vue({
	el: "#customized",
	//資料區
	data: {
		//換頁樣式
		page_total: main.page_total, //每次_總筆數
		page_batch: main.page_batch, //每次_第幾批

		page_show_size: main.page_show_size, //目前_每分頁顯示數量
		page_now_size: main.page_now_size, //目前_實際筆數
		page_now: main.page_now, //目前_頁數
		ll_fo_list_nb:0,//區塊記數
		search_ds:{},//查詢的內容物
		//save data
		modify_datas :{},

	},
	//初始化
	created() {
		console.log("label_list.html(created)");
	},
	//可呼叫方法
	methods: {
		setDataTitle(title,documents, html_permission) {
			//console.log(title);
			console.log(documents);
			
			
		},
		setDataList(list, list_son, body_type) {
			//清單注入[資訊,類型(可能是一般類型(清單)/父子類型(壓縮))] general/group
			console.log(list);
			var documents = list['customized_detail'];//選擇標籤
			
			//尚未有資料
			if(documents==null){
				return false;
			}
			
			//注入 單據資料
			$('#rr_sn input').focus();
			$('#rd_ru_id select').val(documents['rd_ru_id']);
			

		},
		setSearch(search) {
			//查詢注入資訊
			
			if(search!=null && search.customized_detail!=null){
				var old_choose = $("#label_choose").val();
				$("#label_choose .lc_list").remove();
				customized.search_ds = {}
				search.customized_detail.forEach(function(ll) {
					//Label Choose(選擇標籤):
					var lc_list = $($("#label_choose .def").clone());//複製樣本
					lc_list.removeClass("def");
					lc_list.addClass("lc_list");
					lc_list.attr("id",ll.ll_id);
					lc_list.attr("value",ll.ll_id);
					lc_list.text("("+ll.ll_gname+")"+ll.ll_name);
					lc_list.appendTo("#label_choose");
					
					var search_d = {};
					search_d.ll_name = ll.ll_name;
					search_d.ll_gname = ll.ll_gname
					search_d.ll_a_json = JSON.parse(ll.ll_a_json);
					customized.search_ds[ll.ll_id] = search_d;
				});
				$('#label_choose').val(old_choose).trigger('change');
				//跟隨選單
				$("#ll_fd_f .lc_list").remove();
				$("#ll_bfd_f .lc_list").remove();
				$("#ll_bqfd_f .lc_list").remove();
				if(search!=null && search.customized_follow!=null){
					search.customized_follow.forEach(function(ll) {
						var value = ll.split(".")[0]+'.'+ll.split(".")[1];
						var name = ll.split(".")[2];
						
						var lc_list = $($("#ll_fd_f .def_na").clone());//複製樣本
						lc_list.removeClass("def_na");
						lc_list.addClass("lc_list");
						lc_list.attr("value",value);
						lc_list.text(name);
						
						lc_list.appendTo("#ll_fd_f");
						lc_list.clone().appendTo("#ll_bfd_f");
						lc_list.clone().appendTo("#ll_bqfd_f");
						
					});
				}
				console.log(customized.search_ds);
				main.loading(false);
			}
		},
		//圖片處理
		file_reader_img(file,imgs){
			var reader = new FileReader();
			reader.readAsDataURL(file);
			reader.onload = function (e) {
				//顯示圖片位置
    			imgs[file.key].children[0].src = reader.result;
    			imgs[file.key].children[1].value = file.new_name;
    			//存入參數
    			var s =  JSON.parse(imgs[2].value);
    			var fileContent ={};
    			fileContent.fileName = file.new_name;
    			fileContent.fileData = reader.result;
    			s.push(fileContent);
    			imgs[2].value =JSON.stringify(s);
    			//console.log(imgs[6].value);
			};
			reader.onerror = function (error) {
				console.log('Error: ', error);
			};
		},
		//初始化
		selectAllInit() {
			//切換區塊類型
			$(document).on("change", "#label_block_type", function (event) {
				console.log(event.currentTarget.value);
				switch(event.currentTarget.value){
					case ""://char_type
						$("#char_type_content").toggle("fast");
						$("#img_type_content").css("display","none");
						$("#qr_code_type_content").css("display","none");
						$("#barcode_type_content").css("display","none");
					break;
					case "img_type":
						$("#img_type_content").toggle("fast");
						$("#char_type_content").css("display","none");
						$("#qr_code_type_content").css("display","none");
						$("#barcode_type_content").css("display","none");
					break;
					case "barcode_type":
						$("#barcode_type_content").toggle("fast");
						$("#char_type_content").css("display","none");
						$("#img_type_content").css("display","none");
						$("#qr_code_type_content").css("display","none");
					break;
					case "qr_code_type":
						$("#qr_code_type_content").toggle("fast");
						$("#char_type_content").css("display","none");
						$("#img_type_content").css("display","none");
						$("#barcode_type_content").css("display","none");
					break;
				}
			});
			//ll_gfa_clear_btn
			 $(document).on("click", "#ll_gfa_clear_btn", function (event) {
				 $("#ll_gfa").attr('src','./img/imgFrame.png');
			 });
			
			//關閉區塊內容
			 $(document).on("click", "#label_block_close_btn", function (event) {
				$("#label_block_content").css("display","none"); 
				if($("#label_block_id").text()!=""){
					$("#"+$("#label_block_id").text()+" .ll_fo_name").removeAttr("disabled");
					$("#"+$("#label_block_id").text()).removeClass("bg-success");
					$("#"+$("#label_block_id").text()).removeClass("bg-danger");
					$("#"+$("#label_block_id").text()).addClass("bg-white");
				}
			 });
			//區塊內容控制
			 $(document).on("click", ".ll_fo_action", function (event) {
				//開啟-區塊內容
				if($(event.currentTarget).hasClass("bi-pencil-fill")){
					console.log(event.currentTarget.title);
					var id = event.currentTarget.title.replace("ll_fo_mod","");
					id="ll_fo_list"+id;
					//Step1.範例->不動作
					if(id=="ll_fo_list_ex"){
						return false;
					}
					
					//Step2.開啟?>如果是關閉狀態/如果是重複點選+Name Key不是空直
					if($("#label_block_content").css('display')=='none' || 
						(id==$("#label_block_id").text() && 
						$("#"+id+" .ll_fo_name").val()!="" && 
						$("#"+id+" .ll_fo_name").val()==$("#label_block_name").text())){
						$("#label_block_content").toggle("fast",function(){
							//關閉狀態啟狀態->可以修改
							if($("#label_block_content").css('display')=='none'){
								$("#"+id+" .ll_fo_name").removeAttr("disabled");	
								$("#"+id).removeClass("bg-success");
								$("#"+id).removeClass("bg-danger");
								$("#"+id).addClass("bg-white");
							}
						});			
					}
					//Step3.取得ID->帶入(可能沒設定好)
					if($("#"+id+" .ll_fo_name").val()==""){
						$("#label_block_id").text("");
						$("#label_block_name").text(".Error");
						$("#label_block_name").addClass('bg-danger');
						$("#label_block_name").removeClass('bg-success');
						
						$(".ll_fos").removeClass("bg-success");
						$(".ll_fos").removeClass("bg-danger");
						$(".ll_fos").addClass("bg-white");
						$("#"+id).addClass("bg-danger");
						$("#"+id).removeClass("bg-white");
						
						//鎖定+清除設定
						customized.onLockAll(true,true);
					}else{
						//帶入+區塊設定內容物
						$("#label_block_id").text(id);
						$("#label_block_name").text($("#"+id+" .ll_fo_name").val());
						$("#label_block_name").addClass('bg-success');
						$("#label_block_name").removeClass('bg-danger');
						
						$(".ll_fos").removeClass("bg-success");
						$(".ll_fos").removeClass("bg-danger");
						$(".ll_fos").addClass("bg-white");
						
						//帶入+解鎖設定
						customized.onLockAll(false,true);
						$(".ll_fos .ll_fo_name").removeAttr("disabled");
						$("#"+id+" .ll_fo_name").attr("disabled","disabled");
						$("#"+id).addClass("bg-success");
						$("#"+id).removeClass("bg-white");
						
						//帶入-設定內容
						if($("#"+id+" .ll_fo_content").val()!=""){
							var bc_json = JSON.parse($("#"+id+" .ll_fo_content").val());
							switch(bc_json.label_block_type){
								case"char_type"://文字
									if($('#label_block_type').val()!=''){
										$('#label_block_type').val('').trigger('change');
									}
									$("#ll_fd").val(bc_json.ll_fd);
									$("#ll_fd_f").val(bc_json.ll_fd_f).trigger('change');
									$("#ll_fd_test").val(bc_json.ll_fd_test);
									$("#ll_a_t").val(bc_json.ll_a_t=="A"?'':bc_json.ll_a_t);
									$("#ll_a_c").val(bc_json.ll_a_c=='N'?'':bc_json.ll_a_c);
									$("#ll_a_h").val(bc_json.ll_a_h);
									$("#ll_a_w").val(bc_json.ll_a_w );
									$("#ll_fb_a").val(bc_json.ll_fb_a);
									$("#ll_fb_b").val(bc_json.ll_fb_b);
									$("#ll_fb_c").val(bc_json.ll_fb_c);
									$("#ll_fb_d").val(bc_json.ll_fb_d);
								break;
								case"img_type"://圖片
									if($('#label_block_type').val()!='img_type'){
										$('#label_block_type').val('img_type').trigger('change');										
									}
									$("#ll_gfa").attr('src',bc_json.ll_gfa);
									$("#ll_gfa_p").val(bc_json.ll_gfa_p);

								break;
								case"barcode_type"://一維條碼 
									if($('#label_block_type').val()!='barcode_type'){
										$('#label_block_type').val('barcode_type').trigger('change');
									}
									$("#ll_bfd_f").val(bc_json.ll_bfd_f).trigger('change');
									$("#ll_bfd").val(bc_json.ll_bfd);
									$("#ll_bfd_test").val(bc_json.ll_bfd_test);
									$("#ll_bfd_f").val(bc_json.ll_bfd_f);
									$("#ll_by_m").val(bc_json.ll_by_m);
									$("#ll_by_w").val(bc_json.ll_by_w);
									$("#ll_b_h").val(bc_json.ll_b_h);
									$("#ll_b_x").val(bc_json.ll_b_x=='3'?'':bc_json.ll_b_x);
									$("#ll_a_b").val(bc_json.ll_a_b=='N'?'':bc_json.ll_a_b);
									$("#ll_b_d").val(bc_json.ll_b_d);
									$("#ll_b_efg").val(bc_json.ll_b_efg);
								break;
								case"qr_code_type"://二維條碼
									if($('#label_block_type').val()!='qr_code_type'){
										$('#label_block_type').val('qr_code_type').trigger('change');									
									}
									$("#ll_bqfd_f").val(bc_json.ll_bqfd_f).trigger('change');
									$("#ll_bqfd").val(bc_json.ll_bqfd);
									$("#ll_bqfd_test").val(bc_json.ll_bqfd_test);
									$("#ll_bqfd_f").val(bc_json.ll_bqfd_f);
									$("#ll_bq_c").val(bc_json.ll_bq_c=='N'?'':bc_json.ll_bq_c);
									$("#ll_bq_d").val("");
									$("#ll_bq_e").val(bc_json.ll_bq_e);
								break;							
							}
						}
					}
				}
				//添加區塊
				if($(event.currentTarget).hasClass("bi-plus-square")){
					var ll_fo_list_clone = $($("#ll_fo_list_ex").clone());//複製樣本
					var nb = customized.ll_fo_list_nb++;
					ll_fo_list_clone.attr("id","ll_fo_list_"+nb);
					ll_fo_list_clone.addClass("ll_fos");
					//功能
					ll_fo_list_clone.find(".bi-x-square").attr("title","ll_fo_del_"+nb);//移除
					ll_fo_list_clone.find(".bi-plus-square").attr("title","ll_fo_add_"+nb);//新增
					ll_fo_list_clone.find(".bi-pencil-fill").attr("title","ll_fo_mod_"+nb);//修改
					//功能替換
					ll_fo_list_clone.find(".bi-plus-square").addClass("d-none");
					ll_fo_list_clone.find(".bi-x-square").removeClass("d-none");
					ll_fo_list_clone.find(".bi-pencil-fill").removeClass("d-none");
					//可填寫					
					ll_fo_list_clone.find(".ll_fo_name").removeAttr("disabled","");
					//預設值
					ll_fo_list_clone.find(".ll_fo_name").val("ex_"+nb);
					ll_fo_list_clone.appendTo("#label_blocks");
					
					//區塊
					var bg_pl_clone = $($("#bg_pl_ex").clone());//複製樣本
					bg_pl_clone.addClass("bg_pls");
					bg_pl_clone.find(".pl_title").text("ex_"+nb);
					bg_pl_clone.attr("id","bg_pl_"+nb);
					bg_pl_clone.removeClass("d-none");
					bg_pl_clone.appendTo("#bg_label");
					//托移功能
					$("#bg_pl_"+nb).draggable({
						containment: "#bg_label", 
						scroll: false,
						grid:[ 10, 10 ] ,
						drag: function(event,ui) {
							//移動中
							var pl_x = parseInt($(event.target).css("left").replace("px"));
							var pl_y = parseInt($(event.target).css("top").replace("px"));
							
							pl_x = Math.floor(pl_x/10)*10;
							pl_y = Math.floor(pl_y/10)*10;
							$("#pl_x").text(pl_x-10<0?0:(pl_x-10));
							$("#pl_y").text(pl_y-10<0?0:(pl_y-10));
							$(event.target).css("left",((pl_x-10<10)?10:pl_x)+"px");
							$(event.target).css("top",((pl_y-10<10)?10:pl_y)+"px");
							
						},
						stop: function(event,ui) {
							//停止後
							var pl_x = parseInt($(event.target).css("left").replace("px"));
							var pl_y = parseInt($(event.target).css("top").replace("px"));
							var ll_fo_list = event.target.id.replace("bg_pl","ll_fo_list");
							pl_x = Math.floor(pl_x/10)*10;
							pl_y = Math.floor(pl_y/10)*10;
							$("#"+ll_fo_list+" .ll_fo_x").val((pl_x-10<0)?0:(pl_x-10));
							$("#"+ll_fo_list+" .ll_fo_y").val((pl_y-10<0)?0:(pl_y-10));
							$(event.target).css("left",((pl_x-10<10)?10:pl_x)+"px");
							$(event.target).css("top",((pl_y-10<10)?10:pl_y)+"px");
						}
					});
				}
				//移除功能
				if($(event.currentTarget).hasClass("bi-x-square")){
					var id = event.currentTarget.title.replace("ll_fo_del","");
					
					$("#ll_fo_list"+id).remove();
					$("#bg_pl"+id).remove();
				}
			});
			//標籤紙暫時存檔
			$(document).on("click", "#label_set_ok_btn", function (event) {
				//檢查
				$("#ll_name").val($("#ll_name").val()==""?"Test_Name":$("#ll_name").val());
				$("#sys_note").val($("#sys_note").val()==""?"Test_Note":$("#sys_note").val());				
				$("#ll_g_name").val($("#ll_g_name").val()==""?"Test_Group":$("#ll_g_name").val());

				$("#ll_ll").val($("#ll_ll").val()<=80?200:$("#ll_ll").val());
				$("#ll_pw").val($("#ll_pw").val()<=80?600:$("#ll_pw").val());
				$("#ll_lh_x").val($("#ll_lh_x").val()==""?"0":$("#ll_lh_x").val());
				$("#ll_lh_y").val($("#ll_lh_y").val()==""?"0":$("#ll_lh_y").val());
				$("#ll_md").val($("#ll_md").val()==""?"20":$("#ll_md").val());
				$("#ll_pr").val($("#ll_pr").val()==""?"5":$("#ll_pr").val());
				
				if($("#ll_o_p_type").val()!=""){
					$("#ll_o_p_qty").val($("#ll_o_p_qty").val()==""?"40":$("#ll_o_p_qty").val());
					$("#ll_o_l_qty").val($("#ll_o_l_qty").val()==""?"10":$("#ll_o_l_qty").val());
					$("#ll_o_top").val($("#ll_o_top").val()==""?"10":$("#ll_o_top").val());
				}
				
				//暫存
				var ls = {};
				ls.ll_id = $("#ll_id").val();
				ls.ll_ci = $("#ll_ci").val();
				ls.ll_name = $("#ll_name").val();
				ls.ll_g_name = $("#ll_g_name").val();
				ls.ll_ll = $("#ll_ll").val();
				ls.ll_pw = $("#ll_pw").val();
				ls.ll_lh_x = $("#ll_lh_x").val();
				ls.ll_lh_y = $("#ll_lh_y").val();
				ls.ll_md = $("#ll_md").val();
				ls.ll_pr = $("#ll_pr").val();
				
				ls.sys_note = $("#sys_note").val();
				$("#ll_xa").val(JSON.stringify(ls));
				var lp = {};
				lp.ll_o_p_type = $("#ll_o_p_type").val();
				lp.ll_o_p_qty = $("#ll_o_p_qty").val()==""?"0":$("#ll_o_p_qty").val();
				lp.ll_o_l_qty = $("#ll_o_l_qty").val()==""?"0":$("#ll_o_l_qty").val();
				lp.ll_o_h_b_name = $("#ll_o_h_b_name").val();
				lp.ll_o_s_b_name = $("#ll_o_s_b_name").val();
				lp.ll_o_top = $("#ll_o_top").val()==""?"0":$("#ll_o_top").val();
				$("#ll_o_all").val(JSON.stringify(lp));
				
				//console.log(ls);
				//設定標籤紙
				$("#bg_label").css('width',$("#ll_pw").val());
				$("#bg_label").css('height',$("#ll_ll").val());
			});
			//區塊暫時存檔
			$(document).on("click", "#label_block_ok_btn", function (event) {
				var bc = {};//json 格式
				var id = $("#label_block_id").text();
				$("#bg_pl_"+id.replace("ll_fo_list_","")).find(".pl_content").text('');
				switch($("#label_block_type").val()){
					case"":
						//防呆1.
						$("#ll_fd").val($("#ll_fd").val()==""?"Text_FD":$("#ll_fd").val());
						$("#ll_fd_test").val($("#ll_fd_test").val()==""?"Test_FD":$("#ll_fd_test").val());
						$("#ll_a_h").val($("#ll_a_h").val()==""?"1":$("#ll_a_h").val());
						//防呆2.
						if(bc.ll_fb_d = $("#ll_fb_d").val()!=""){
							$("#ll_fb_a").val($("#ll_fb_a").val()==""?$("#ll_pw").val():$("#ll_fb_a").val());
							$("#ll_fb_b").val($("#ll_fb_b").val()==""?1:$("#ll_fb_b").val());
							$("#ll_fb_c").val($("#ll_fb_c").val()==""?1:$("#ll_fb_c").val());
						}
						bc.label_block_type ="char_type";
						//文字性質
						bc.ll_fd = $("#ll_fd").val();
						bc.ll_fd_test = $("#ll_fd_test").val();
						bc.ll_fd_f = $("#ll_fd_f").val();
						bc.ll_a_t = $("#ll_a_t").val()==''?'A':$("#ll_a_t").val();
						bc.ll_a_c = $("#ll_a_c").val()==''?'N':$("#ll_a_c").val();
						bc.ll_a_h = $("#ll_a_h").val();
						bc.ll_a_w = $("#ll_a_w").val();
						//預覽文字內容
						$("#bg_pl_"+id.replace("ll_fo_list_","")).find(".pl_content").text($("#ll_fd").val());
						if($("#ll_fb_a").val()!="" && $("#ll_fb_a").val()>0){
							$("#bg_pl_"+id.replace("ll_fo_list_","")).find(".pl_content").css("max-width",$("#ll_fb_a").val()+"px");
						}
						
						//區塊屬性設置
						bc.ll_fb_a = $("#ll_fb_a").val();
						bc.ll_fb_b = $("#ll_fb_b").val();
						bc.ll_fb_c = $("#ll_fb_c").val();
						bc.ll_fb_d = $("#ll_fb_d").val();
					break;
					case"img_type":
						//防呆1.
						if($("#ll_gfa").attr('src')=="./img/imgFrame.png"){
							return false;
						}
						if($("#ll_gfa_p").val()=="" ||$("#ll_gfa_p").val()==0 || $("#ll_gfa_p").val()>1){
							$("#ll_gfa_p").val(1);
						}
						//圖片
						bc.label_block_type ="img_type";
						bc.ll_gfa = $("#ll_gfa").attr('src');
						bc.ll_gfa_p = $("#ll_gfa_p").val();
						//預覽圖片內容
						$("#bg_pl_"+id.replace("ll_fo_list_","")).find(".pl_content").html('<img src="'+bc.ll_gfa+'" />');
						var width_img = $("#bg_pl_"+id.replace("ll_fo_list_","")).find(".pl_content img").css('width');
						width_img = parseInt(width_img.replace("px",""))*parseFloat(bc.ll_gfa_p);
						$("#bg_pl_"+id.replace("ll_fo_list_","")).find(".pl_content img").css('width',width_img);
						
						
					break;
					case"barcode_type":
						//防呆1.
						$("#ll_bfd").val($("#ll_bfd").val()==""?"Text_BFD":$("#ll_bfd").val());
						$("#ll_bfd_test").val($("#ll_bfd_test").val()==""?"Test_BFD":$("#ll_bfd_test").val());
						if($("#ll_by_m").val()==""||$("#ll_by_m").val()<1||$("#ll_by_m").val()>5){
							$("#ll_by_m").val(1);
						}
						if($("#ll_by_w").val()==""||$("#ll_by_w").val()<1||$("#ll_by_w").val()>3){
							$("#ll_by_w").val(1);
						}
						if($("#ll_b_h").val()==""||$("#ll_b_h").val()<1||$("#ll_b_h").val()>100){
							$("#ll_b_h").val(30);
						}

						//一維條碼
						bc.label_block_type = "barcode_type";
						bc.ll_bfd = $("#ll_bfd").val();
						bc.ll_bfd_test = $("#ll_bfd_test").val();
						bc.ll_bfd_f = $("#ll_bfd_f").val();
						bc.ll_by_m = $("#ll_by_m").val();
						bc.ll_by_w = $("#ll_by_w").val();
						bc.ll_b_h = $("#ll_b_h").val();
						bc.ll_b_x = $("#ll_b_x").val()==''?'3':$("#ll_b_x").val();
						bc.ll_b_c = $("#ll_b_c").val()==''?'N':$("#ll_b_c").val();
						bc.ll_b_d = $("#ll_b_d").val();
						bc.ll_b_efg = $("#ll_b_efg").val();
						//預覽一維條碼
						$("#bg_pl_"+id.replace("ll_fo_list_","")).find(".pl_content").html('<img src="./img/barcode.png"/>');
						$("#bg_pl_"+id.replace("ll_fo_list_","")).find(".pl_content img").css('height',bc.ll_b_h+"px");
						$("#bg_pl_"+id.replace("ll_fo_list_","")).find(".pl_content img").css('width',(bc.ll_bfd.length*bc.ll_by_m*10)+"px");
						
						
					break;
					case"qr_code_type":
						//防呆1.
						$("#ll_bqfd").val($("#ll_bqfd").val()==""?"Text_BQFD":$("#ll_bqfd").val());
						$("#ll_bfd_test").val($("#ll_bfd_test").val()==""?"Test_BQFD":$("#ll_bfd_test").val());
						if($("#ll_bq_e").val()==""||$("#ll_bq_e").val()<1||$("#ll_bq_e").val()>10){
							$("#ll_bq_e").val(2);
						}
						
						
						//二維條碼
						bc.label_block_type ="qr_code_type";
						bc.ll_bqfd = $("#ll_bqfd").val();
						bc.ll_bqfd_test = $("#ll_bqfd_test").val();
						bc.ll_bqfd_f = $("#ll_bqfd_f").val();
						bc.ll_bq_c = $("#ll_bq_c").val()==''?'N':$("#ll_bq_c").val();
						bc.ll_bq_d = $("#ll_bq_d").val()==''?'2':$("#ll_bq_d").val();
						bc.ll_bq_e = $("#ll_bq_e").val();
						//預覽二維條碼
						$("#bg_pl_"+id.replace("ll_fo_list_","")).find(".pl_content").html('<img src="./img/QRcode.png"/>');
						$("#bg_pl_"+id.replace("ll_fo_list_","")).find(".pl_content img").css('width',(bc.ll_bq_e*20)+"px");
						
					break;
				}
				
				//寫入該區塊暫存
				
				$("#"+id+" .ll_fo_content").val(JSON.stringify(bc));
				
				//console.log(bc);
			});
			//區塊名稱修正
			 $(document).on("change", ".ll_fo_name", function (event) {
				 console.log(event.currentTarget.parentElement.parentElement.id);
				 var val = event.currentTarget.value;
				 var bg_pl_id = event.currentTarget.parentElement.parentElement.id;
				 bg_pl_id = bg_pl_id.replace("ll_fo_list","bg_pl");
				 $("#"+bg_pl_id).find(".pl_title").text(val);
        		
        	 });
			//Label Choose(選擇標籤):
			 $(document).on("change", "#label_choose", function (event) {
				 console.log("Label Choose(選擇標籤)");
				 $("#label_block_content").css("display","none"); 
				 var id = event.currentTarget.value;
				if(id==""){
					//新增
					$("#ll_id").val("");
				}else{
					customized.removeAll();
					//帶入
					var ll_json = customized.search_ds[id].ll_a_json;
					//修改->	暫存
					var ls = {};
					ls.ll_id = $("#ll_id").val(id).val();
					ls.ll_ci = $("#ll_ci").val("UTF-8").val();
					ls.ll_name = $("#ll_name").val(ll_json['label_set'].ll_name).val();
					ls.ll_g_name = $("#ll_g_name").val(ll_json['label_set'].ll_g_name).val();
					ls.ll_ll = $("#ll_ll").val(ll_json['label_set'].ll_ll).val();
					ls.ll_pw = $("#ll_pw").val(ll_json['label_set'].ll_pw).val();
					ls.ll_lh_x = $("#ll_lh_x").val(ll_json['label_set'].ll_lh_x).val();
					ls.ll_lh_y = $("#ll_lh_y").val(ll_json['label_set'].ll_lh_y).val();
					ls.ll_md = $("#ll_md").val(ll_json['label_set'].ll_md).val();
					ls.ll_pr = $("#ll_pr").val(ll_json['label_set'].ll_pr).val();
					ls.sys_note = $("#sys_note").val(ll_json['label_set'].sys_note).val();
					console.log(ls);
					$("#ll_xa").val(JSON.stringify(ls));
					var lp = {};
					//Label Package
					if(ll_json['label_package'].ll_o_p_type=="multiple"){
						$("#ll_o_p_all .clear_i").removeAttr("disabled","none");
					}
					lp.ll_o_p_type = $("#ll_o_p_type").val(ll_json['label_package'].ll_o_p_type).val();
					lp.ll_o_p_qty = $("#ll_o_p_qty").val(ll_json['label_package'].ll_o_p_qty).val();
					lp.ll_o_l_qty = $("#ll_o_l_qty").val(ll_json['label_package'].ll_o_l_qty).val();
					lp.ll_o_h_b_name = $("#ll_o_h_b_name").val(ll_json['label_package'].ll_o_h_b_name).val();
					lp.ll_o_s_b_name = $("#ll_o_s_b_name").val(ll_json['label_package'].ll_o_s_b_name).val();
					lp.ll_o_top = $("#ll_o_top").val(ll_json['label_package'].ll_o_top).val();
					$("#ll_o_all").val(JSON.stringify(lp));
					//bg_label
					$('#bg_label').css('height',ls.ll_ll+"px");
					$('#bg_label').css('width',ls.ll_pw+ "px");
					
					//label_block
					ll_json['label_block'].forEach(function(item) {

						$("#ll_fo_list_ex .bi-plus-square").trigger('click');
						$(".ll_fos").last().find(".ll_fo_name").val(item.ll_fo_name);
						$(".ll_fos").last().find(".ll_fo_y").val(item.ll_fo_y);
						$(".ll_fos").last().find(".ll_fo_x").val(item.ll_fo_x);
						$(".ll_fos").last().find(".ll_fo_content").val(JSON.stringify(item.ll_fo_content));	
						
						$(".bg_pls").last().css("top",(parseInt(item.ll_fo_y)+10) + "px");
						$(".bg_pls").last().css("left",(parseInt(item.ll_fo_x)+10) + "px");
						$(".bg_pls").last().find(".pl_title").text(item.ll_fo_name);
						//預覽文字內容
						switch(item.ll_fo_content.label_block_type){
						case "char_type":
							$(".bg_pls").last().find(".pl_content").text(item.ll_fo_content.ll_fd);		
							if(item.ll_fo_content.ll_fb_a!="" && item.ll_fo_content.ll_fb_a>0){
								$(".bg_pls").last().find(".pl_content").css("max-width",item.ll_fo_content.ll_fb_a+"px");
							}
							break;
						case "img_type":
							$(".bg_pls").last().find(".pl_content").html('<img src="'+item.ll_fo_content.ll_gfa+'" />');
							var width_img = $(".bg_pls").last().find(".pl_content img").css('width');
							width_img = parseInt(width_img.replace("px",""))*parseFloat(item.ll_fo_content.ll_gfa_p);
							$(".bg_pls").last().find(".pl_content img").css('width',width_img);
							break;
						case "barcode_type":
							$(".bg_pls").last().find(".pl_content").html('<img src="./img/barcode.png"/>');
							$(".bg_pls").last().find(".pl_content img").css('height',item.ll_fo_content.ll_b_h+"px");
							$(".bg_pls").last().find(".pl_content img").css('width',(item.ll_fo_content.ll_by_m*item.ll_fo_content.ll_bfd.length*10)+"px");
							break;
						case "qr_code_type":
							$(".bg_pls").last().find(".pl_content").html('<img src="./img/QRcode.png"/>');	
							$(".bg_pls").last().find(".pl_content img").css('width',(item.ll_fo_content.ll_bq_e*20)+"px");
							break;
						
						}
						
					});
				}
        	 });
			 //點擊圖片(預覽)
			 $(document).on("click", ".c_img_listen", function (event) {
        		 var image = new Image();
        	     image.src = event.target.src;
        		 var w = window.open("");
        	     w.document.write(image.outerHTML);
        	     w.document.close();
        	 });
        	 //圖片上傳資料
        	 $(document).on("change", "#label_block_content .c_chose_imgs", function (event) {
        		 console.log();
        		 //console.log(event);
        		 //console.log(event.currentTarget.files);
        		 var imgs =  $(this).parent().parent()[0].children;
        		 var imgs_def = $(this).parent().parent()[0];
        		 var imgs_ms = $(this).parent().parent()[0].children[0];

        		 var files = event.currentTarget.files;
        		 var file_size = 2000000;//限制2000000 = 2M
        		 var file_nb = 5;//限制 數量 5張圖
        		 $(imgs_ms).find('p').addClass("d-none");
        		 $(imgs_ms).find('.save_ms_put').removeClass("d-none");
        		 $(imgs_def).find('div img').attr('src','./img/imgFrame.png');
        		 $(imgs_def).find('div .c_file_name').val('檔案名稱?');
        		 imgs[2].value='[]';//預設內容
        		 //檢查機制
        		 if(files.length <= file_nb){
        			 for(var i=0;i<files.length;i++){
        				 var file_one = files[i];
        				 if(file_one.size > file_size){
        					 console.log('檔案太大');   
        					 $(imgs_ms).find('p').addClass("d-none");
        					 $(imgs_ms).find('.save_ms_bigger').removeClass("d-none");
        					 event.target.value = null;
        					 return false;
        				 }
        				 if(file_one.type!="image/png"){
        					 console.log('副檔錯誤');    
        					 $(imgs_ms).find('p').addClass("d-none");
        					 $(imgs_ms).find('.save_ms_atta').removeClass("d-none");
        					 event.target.value = null;
        					 return false;
        				 }
        			 }
        		 }else{
        			 console.log('檔案太多');  
        			 $(imgs_ms).find('p').addClass("d-none");
					 $(imgs_ms).find('.save_ms_5pic').removeClass("d-none");
        			 event.target.value = null;
        			 return false;
        		 }
        		 //解析檔案->顯示
        		 for(var i=0;i<files.length;i++){
        			 files[i].key = (i+1);
        			 files[i].new_name = 'MESimg'+(i+1)+'.png';
        			 customized.file_reader_img(files[i],imgs);
        		 }
        	});
        	 
			//測試列印
			$(document).on("click", "#ll_print_t_l_btn", function (event) {
				customized.printTestSend();
			});
        	//查詢標籤
			$(document).on("click", "#ll_search_btn", function (event) {
				customized.searchSend(true);
			});
			//存檔標籤
			$(document).on("click", "#ll_save_btn", function (event) {
				customized.sendSave();
			});
			//清除標籤
			$(document).on("click", "#ll_clear_btn", function (event) {
				customized.removeAll();
			});
			//切換顯示?
			$(document).on("change", "#ll_o_p_type", function (event) {
				var val = event.currentTarget.value;
				if(val=="multiple"){
					$("#ll_o_p_all .clear_i").removeAttr("disabled","none");
					
				}else{
					$("#ll_o_p_all .clear_i").attr("disabled","disabled");
					$("#ll_o_p_all .clear_i").val("");
				}
				var lp = {};
				lp.ll_o_p_type = $("#ll_o_p_type").val();
				lp.ll_o_p_qty = $("#ll_o_p_qty").val()==""?"0":$("#ll_o_p_qty").val();
				lp.ll_o_l_qty = $("#ll_o_l_qty").val()==""?"0":$("#ll_o_l_qty").val();
				lp.ll_o_h_b_name = $("#ll_o_h_b_name").val();
				lp.ll_o_s_b_name = $("#ll_o_s_b_name").val();
				lp.ll_o_top = $("#ll_o_top").val()==""?"0":$("#ll_o_top").val();
				$("#ll_o_all").val(JSON.stringify(lp));
			});
			//拖曳
		    $( "#label_blocks" ).sortable();
		    $( "#label_blocks" ).disableSelection();
		},
		//鎖定(可能資料不正確)
		onLockAll(lock,def){
			if(lock){
				$(".bc_all").attr("disabled","disabled")
			}else{
				$(".bc_all").removeAttr("disabled");	
			}
			//還原預設
			if(def){
				$(".bc_all").val("");
				$("#ll_gfa").attr("src","./img/imgFrame.png");
			}
		},
		//清除所有資訊
		removeAll(){
			$(".clear_i").val("");
			$('#ll_o_p_type').val('').trigger('change');
			$(".ll_fos").remove();
			$(".bg_pls").remove();
			 
		},
		//search
		searchSend(search) {
			if(search==null){
				return null;
			}
			main.loading(true);
			//查詢
			//Ex:body:{search:{b:b,c:c}}
			//search = {};
			
			//包裝
			var action = "S1";
			var s_type = "POST";
			var s_url = (t_body.html_body + "."+action).replace("html", "basil").replace("body_", "");
			var s_data = {};
			var req = {};
			req.user = $('#name').text();
			req.date = new Date();
			req.action = action;
			req.body = {};
			req.body.search = search;
			req.page_total = this.page_total;
			req.page_batch = this.page_batch;
			req.page_now_nb = this.page_now_nb;
			req.html_body = "";
			req.call_bk_fn = "customized_search";
			req.call_bk_vals = {};
			req.call_bk_vals['search']=false;
			s_data.req_content = req;
			//傳送
			main.ajaxSend(s_url, s_type, s_data);
		},
		//存檔
		sendSave() {
			console.log("sendSave");
			var modify_label = {};
			var label_blocks = [];
			//每個區塊
			var modify_detail=[];
			$(".ll_fos").each(function( index ) {
				console.log(index + ": " + $(this).attr("id"));
				var id = $(this).attr("id");
				var ll_fo = {};
				ll_fo['ll_fo_name'] = $('#'+id+' .ll_fo_name').val();
				ll_fo['ll_fo_x'] = $('#'+id+' .ll_fo_x').val();
				ll_fo['ll_fo_y'] = $('#'+id+' .ll_fo_y').val();
				ll_fo['ll_fo_content'] = JSON.parse($('#'+id+' .ll_fo_content').val());
				modify_detail.push(ll_fo);
			});
			//標籤紙設定
			modify_label['label_set'] = JSON.parse($('#ll_xa').val());
			//標籤外包裝設定
			modify_label['label_package'] = JSON.parse($('#ll_o_all').val());
			//標籤每個區塊
			modify_label['label_block'] = modify_detail;

			this.modify_datas['detail'] = modify_label;
			console.log(this.modify_datas);
			
			var action = "S2";
			var	s_type = "PUT";
			var s_url = (t_body.html_body+"."+action).replace('html','basil').replace('body_','');
			var	s_data = {};
			var req = {};
			req.action=action;
			req.user=$('#name').text();
			req.date=new Date();
			req.body={};
			req.body['modify'] = this.modify_datas;
			req.page_total=this.page_total;
			req.page_batch=this.page_batch;
			req.page_now_nb=this.page_now_nb;
			req.html_body= "";
			req.call_bk_fn="customized_save";
			req.call_bk_vals={};
			req.call_bk_vals['search']=true;
			s_data.req_content = req;
			main.ajaxSend(s_url, s_type, s_data);
			main.loading(true);
		},
		//printTest
		printTestSend() {
			main.loading(true);
			//查詢
			//Ex:body:{search:{b:b,c:c}}
			var print ={};
			print.label_choose = $("#label_choose").val();
			print.print_code = $("#print_code").val();
			print.print_qty = $("#print_qty").val();
			
			//包裝
			var action = "S3";
			var s_type = "PUT";
			var s_url = (t_body.html_body + "."+action).replace("html", "basil").replace("body_", "");
			var s_data = {};
			var req = {};
			req.user = $('#name').text();
			req.date = new Date();
			req.action = action;
			req.body = {};
			req.body.print = print;
			req.page_total = this.page_total;
			req.page_batch = this.page_batch;
			req.page_now_nb = this.page_now_nb;
			req.html_body = "";
			req.call_bk_fn = "customized_other";
			req.call_bk_vals = {};
			req.call_bk_vals['search']=false;
			s_data.req_content = req;
			//傳送
			main.ajaxSend(s_url, s_type, s_data);
		},		
		searchReturn() {
			main.loading(false);
			console.log("searchReturn label_list");
			if(main.allData.body.customized_detail!=null){
				this.setSearch(main.allData.body);
			}
		},
		saveReturn(){
			main.loading(false);
			console.log("saveReturn label_list");
			if(main.allData.info_color=="success"){
				if(main.allData.call_bk_vals.search){
					customized.searchSend(true);
				}
			}
		},
		otherReturn() {
			main.loading(false);
			console.log("otherReturn label_list");
			
		},
	},
	//移除監聽事件
	beforeDestroy() {
		console.log("label_list.html(beforeDestroy)");
		
		$(document).off("click", ".ll_fo_action");
		$(document).off("click", "#label_block_ok_btn");
		$(document).off("click", "#label_set_ok_btn");
		$(document).off("click", ".c_img_listen");
		$(document).off("change", "#label_block_content .c_chose_imgs");
		
		
		$(document).off("click", "#ll_gfa_clear_btn");
		$(document).off("click", "#label_block_close_btn");
		$(document).off("change", "#label_block_type");
		$(document).off("change", ".ll_fo_name");
		
		$(document).off("click", "#search_fi_btn");
		$(document).off("click", ".repair_part_fi_btn");
		
		$(document).off("click", "#ll_clear_btn");
		$(document).off("click", "#ll_save_btn");
		$(document).off("click", "#ll_search_btn");
		$(document).off("click", "#ll_print_t_l_btn");
		$(document).off("change", "#ll_o_p_type");
		$(document).off("change", "#label_choose");
		
		
	},
});
</script>